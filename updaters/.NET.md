# Updating BELA with your .NET Projects

## 1. Restore Your Projects

To allow BELA to detect dependencies your project may have on external packages, you need to restore your project. Follow the instructions below depending on whether your project uses **.NET Core** or **.NET Framework**. 

- [.NET Core](#.NET-Core)
- [.NET Framework](#.NET-Framework)

### .NET Core

For projects developed with .NET Core, you should restore your project with the output directory being "./bela/dependencies". Here is an example using dotnet:

```
cd <your-project-folder>
dotnet restore --packages ./.bela/dependencies
```
### .NET Framework

For projects developed using .NET Framework, use your preferred restore tool (such as msbuild or nuget) and ensure the packages directory is created inside your repository folder. Below are examples using **msbuild** and **nuget**:

```
msbuild -t:restore
```
```
nuget restore
```


## 2. Run the Bela Updater

**Still inside your projects folder** run the `bela-updater-dotnet` docker app. It reads all the solutions in the current folder, analyses their projects and generates the `bela-update.json` file.

> [!IMPORTANT]
> It runs with network=none for secure containment.

An example using the `GITHUB_REPOSITORY` env var as source. Adapt it to your own [source](/Concepts.md#sources):
```
docker run --network=none --pull=always \
           -v ./.bela:/.bela \
           -v .:/workspace:ro \
           juxhouse/bela-updater-dotnet -source "$GITHUB_REPOSITORY" \
           -parent-element-path service/my-service \
           -ignore-test-code
```

### `-parent-element-path`  

This optional argument will import your projects' elements as contents to some parent element. If your project is the implementation of a microservice for example, you can import it inside that microservice, like this:
```
  -parent-element-path service/my-service
``` 

### `-ignore-test-code`

This optional flag will make BELA ignore projects that have the `IsTestProject` tag set. Example .csproj file:
```xml
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <IsTestProject>true</IsTestProject>
```


## 3. Upload to BELA

See [upload example](/updaters/reference/upload-example.md).
