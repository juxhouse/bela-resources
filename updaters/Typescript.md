# Updating BELA with your TS and JS Projects

## Preparation: Install Dependencies
  Make sure your project has its dependencies installed. You can skip this step if your dependencies are already installed.
```sh
  npm ci
```

## 1. Run the Bela Updater
  The bela-updater docker app analyses your project and generates the index.scip file.

> [!IMPORTANT]
> It runs with network=none for secure containment.

```sh
docker run --network=none --pull=always \
                     -v ./:/workspace/ \
                     juxhouse/bela-updater-typescript
```

## 2. Upload to BELA
  Use this command to upload to BELA the index.scip file generated by the bela-updater app:
```
curl -X POST "https://$BELA_HOST/api/architecture-scip?source=my-source&parent-element-path=service/my-service&secret=$BELA_API_TOKEN" \
             -H "Content-Type: application/octet-stream" \
             --data-binary @index.scip
```

The `parent-element-path` param is optional. Elements being updated will be contents in the given parent element. 

You can obtain your `BELA_HOST` and `BELA_API_TOKEN` from the BELA web app.

If you are uploading to a local BELA instance running on your machine, you don't need the BELA_API_TOKEN. You can simply do:

```
curl -X POST "https://$BELA_HOST/api/architecture-scip?source=my-source&parent-element-path=service/my-service" \
             -H "Content-Type: application/octet-stream" \
             --data-binary @index.scip
```
