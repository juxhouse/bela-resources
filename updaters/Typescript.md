# Updating BELA with your TS and JS Projects

## Preparation: Install Dependencies
  Make sure your project has all of its dependencies installed. Additionaly, you have to install scip-typescrit to create your project index.
```sh
  npm ci
  npm install @sourcegraph/scip-typescript
```

## 1. Run the Bela Updater
  The bela-updater docker app analyses your project and generates the index.scip file.

> [!IMPORTANT]
> It runs with network=none for secure containment.

```sh
docker run --network=none --pull=always \
                     -v ./:/workspace/ \
                     juxhouse/bela-updater-typescript
```

## 2. Upload to BELA
  Use this command to upload to BELA the bela-update.json file generated by the bela-updater app:

```sh
 curl -X POST "https://$BELA_HOST/api/architecture-scip?source=$GITHUB_REPOSITORY&secret=$BELA_TOKEN" \
             -H "Content-Type: application/octet-stream" \
             --data-binary @index.scip
```
An example using the `GITHUB_REPOSITORY` env var as source, you may adapt it with your own source. You can obtain your `BELA_HOST` and `BELA_TOKEN` from the BELA web app.